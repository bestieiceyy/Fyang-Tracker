<!DOCTYPE html>
<html>
<head>
  <title>Fyang Live Tracker</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      text-align: center; 
      margin-top: 50px; 
      background: #fafafa;
    }
    h1 { font-size: 28px; margin-bottom: 20px; }
    .box { 
      font-size: 22px; 
      padding: 20px; 
      border-radius: 12px; 
      background: #fff; 
      display: inline-block; 
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .gap-green { color: green; font-weight: bold; }
    .gap-red { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <h1>📊 Fyang Live Tracker</h1>
  <div class="box">
    <div id="fyang"></div>
    <div id="will"></div>
    <div id="gap"></div>
  </div>

  <script>
    const POLL_URL = "https://polls.polldaddy.com/vote-js.php?p=15909793";

    async function fetchVotes() {
      try {
        let response = await fetch(POLL_URL);
        let text = await response.text();

        // Regex to extract candidate names and votes
        let matches = [...text.matchAll(/class="pds-answer-text"[^>]*>(.*?)<\/span>.*?\(([\d,]+)\s+votes\)/gs)];

        let fyang = null, will = null;
        for (let m of matches) {
          let name = m[1].trim().toUpperCase();
          let votes = parseInt(m[2].replace(/,/g, ''));
          if (name.includes("FYANG")) fyang = votes;
          if (name.includes("WILL ASHLEY")) will = votes;
        }

        if (fyang !== null && will !== null) {
          document.getElementById("fyang").innerText = "🔥 Fyang Smith: " + fyang.toLocaleString();
          document.getElementById("will").innerText = "⭐ Will Ashley: " + will.toLocaleString();

          let diff = fyang - will;
          let gapElem = document.getElementById("gap");

          if (diff > 0) {
            gapElem.innerText = `Gap: ${diff.toLocaleString()} (Fyang leading)`;
            gapElem.className = "gap-green";
          } else if (diff < 0) {
            gapElem.innerText = `Gap: ${Math.abs(diff).toLocaleString()} (Will leading)`;
            gapElem.className = "gap-red";
          } else {
            gapElem.innerText = `Gap: 0 (Tied)`;
            gapElem.className = "";
          }
        } else {
          document.getElementById("gap").innerText = "⚠️ Candidates not found";
        }
      } catch (err) {
        document.getElementById("gap").innerText = "⚠️ Fetch failed";
      }
    }

    fetchVotes();
    setInterval(fetchVotes, 1000); // refresh every 1 sec
  </script>
</body>
</html>
